<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TaleTeller</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Basic&family=Eater&family=Henny+Penny&family=Kablammo&family=Libre+Baskerville&family=Mystery+Quest&family=Rubik+Gemstones&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Basic&family=Eater&family=Henny+Penny&family=Kablammo&family=Libre+Baskerville&family=Mystery+Quest&family=Rubik+Gemstones&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap">
  <link rel="stylesheet" href="styles.css">

</head>
<body>
  <div id="splash-screen">
    <h1 id="product-name">&nbsp;</h1>
  </div>

  <header>
    <button id="reloadButton" class="svgHeaderButton">
      <img src="img/reload.svg" alt="Reload Button Image" />
    </button>
  <!-- 
    <button id="shareButton" class="svgHeaderButton">
      <img src="img/share.svg" alt="Share Button Image" />
    </button>
-->
    <button id="optionsButton" class="svgHeaderButton">
      <img src="img/options.svg" alt="Option Button Image" />
    </button>

    <div id="arrows" class="centeredButtons">
      <button id="prev">&lt;</button>
      <input type="text" id="indicator" value="1" maxlength="3">
      <button id="next">&gt;</button>
    </div>
    
    <div id="totalPageContainer">of&nbsp;<span id="totalPages">1</span>&nbsp;pages</div>

    <button id="fullscreenButton" class="svgHeaderButton">
      <img src="img/fullscreen.svg" alt="Fullscreen Button Image" />
    </button>

    <button id="playPauseButton" class="svgHeaderButton">
      <img src="img/play.svg" alt="Play-Pause Button Image" />
    </button>
  </header>

  <div id="modalShare" class="modal hidden-display">
    <div class="modal-content share">
      <span id="closeModalShare" class="close-btn">&times;</span>
      <input type="text" id="urlInput" readonly>
      <button id="copyButton">Copy</button>
      <div id="shortenerMsg">Long link, using a link shortener is recommended</div>
    </div>
  </div>

  <div id="modalOptions" class="modal hidden-display">
    <div class="modal-content">
        <span id="closeModalOptions" class="close-btn">&times;</span>
        <div class="modal-body">
            <div class="tab-column">
                <button class="tab-button active" data-target="#changeSpeed">Speeds</button>
                <button class="tab-button" data-target="#changeFontColor">Colors</button>
                <button class="tab-button" data-target="#changeFontStyle">Fonts</button>
                <button class="tab-button" data-target="#changeAutoParse">Parsing</button>
                <button class="tab-button" data-target="#changeExtras">Extras</button>
                <button class="tab-button" data-target="#changeAbout">About</button>
            </div>
            <div class="tab-content">
                <div id="changeSpeed" class="tab active">
                  <div class="settingsRow"><label class="text" for="scrollDelay">Text scroll delay :</label><input type="number" min="0" id="scrollDelay"><label class="unit">(ms)</label></div>
                  <div class="settingsRow"><label class="text" for="fullStopDelay">Full stop delay :</label><input type="number" min="0" id="fullStopDelay"><label class="unit">(ms)</label></div>
                  <div class="settingsRow"><label class="text" for="nextPageDelay">Next page delay :</label><input type="number" min="0" id="nextPageDelay"><label class="unit">(ms)</label></div>
                  <div class="settingsRow settingsButtons"><button id="setDelayDefaults">Set Defaults</button></div>
                </div>
                <div id="changeFontColor" class="tab">
                  <div class="settingsRow"><label class="text" for="fontBaseColor">Base text :</label><input type="color" id="fontBaseColor"></div>
                  <div class="settingsRow"><label class="text" for="fontQuoteColor">Quoted text :</label><input type="color" id="fontQuoteColor"></div>
                  <div class="settingsRow"><label class="text" for="fontQuoteColor">Background :</label><input type="color" id="BGColor"></div>
                  <div class="settingsRow settingsButtons"><button id="setColorDefaults">Set Defaults</button></div>
                </div>
                <div id="changeFontStyle" class="tab">
                  <div class="settingsRow"><label class="text" for="fontSize">Size :</label><input type="number" min="0.5" max="2.0" step="0.1" id="fontSize"><label class="unit">(em)</label></div>
                </div>
                <div id="changeAutoParse" class="tab">
                  <div class="settingsRow" id="settingsAutoParse"><label class="text" for="autoParse">Auto-parse :<input type="checkbox" id="autoParse" /></div>
                  <label class="settingsDesc">(Experimental) Turn this on to auto-parse an AI generated story and attempt to format the pages a bit better. 
                  (ex: summary lines get trimmed, user story action lines beginning with '&gt' are combined with regular pages)
                  </label>
                </div>
                <div id="changeExtras" class="tab">
                  <div class="settingsRow settingsButtons"><button id="clearAllCache">Purge local storage</button></div>
                </div>
                <div id="changeAbout" class="tab">
                  <label class="settingsDesc">Made with ❤️ by Carter.<br><a href="mailto:carter@taleteller.io">carter@taleteller.io</a><br><br>
                  Privacy Policy:<br>All submitted user content is stored locally, only on your machine (and is not uploaded anywhere). TaleTeller.io does not collect, store, or share any personal data and does not use cookies or other tracking technologies.
                </label>
                </div>
            </div>
        </div>
    </div>
  </div>

  <main>
    <textarea id="storyInput" placeholder="---TaleTeller v1.0---
    
Paste your story here and hit the button below! It'll auto-create pages and scroll the words on each page, making it a bit more immersive to read than a wall of text.

 - Use the buttons at the top to change pages, or click on the text to go to the next page.

 - Left/right arrow keys should work too, spacebar will go to the next page.

 - Reload button on top left will clear the story to allow you to paste in a new one.

 - Play button will toggle auto-advancing to the next page after a delay.
 
 - Fullscreen button on top right will do what it's supposed to, unless it doesn't.
 
 - Works pretty horribly on mobile."></textarea>
    <div class="centeredButtons"><button id="storySubmit">Tell me a Tale</button></div>
    <div id="display"></div>
  </main>

  <footer>
    <div id="footerAbout">About / Privacy Policy</div>
  </footer>

  <script>
    const cssFonts = ['"Henny Penny", serif', '"Eater", serif', '"Rubik Gemstones", serif', '"Mystery Quest", serif', '"Kablammo", serif' ];

    function getRandomInt(max) {
        return Math.floor(Math.random() * max);
    }

    const splashTitle = document.getElementById("product-name");
    splashTitle.style.fontFamily = cssFonts[getRandomInt(cssFonts.length)];

  </script>

  <script src="libs/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>
  <script src="index.js"></script>
</body>
</html>